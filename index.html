<!-- build: Portfólio Python do Ronaldo Matesco -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfólio Python — RONALDO MATESCO</title>
  <meta name="description" content="Portfólio de exercícios em Python com execução no navegador (Pyodide). Layout minimalista, fundo com grafos e currículo disponível.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Arsenal:wght@400;700&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet">

  <!-- ===== [PY-RUNNER] SCRIPTS NO HEAD ===== BEGIN -->
  <!-- Python no navegador (Pyodide) -->
  <script defer src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>

  <!-- Runner: cria painel de execução abaixo de cada <pre> Python -->
  <script defer id="py-runner-init">
    window.__PY_RUNNER__ = (function(){
      let pyodidePromise = null;
      async function getPyodide() {
        if (!pyodidePromise) {
          pyodidePromise = loadPyodide({ indexURL: "https://cdn.jsdelivr.net/pyodide/v0.24.1/full/" });
        }
        return pyodidePromise;
      }

      function makePanel(pre){
        const wrap = document.createElement('div');
        wrap.className = 'py-panel';
        wrap.innerHTML = `
          <div class="py-row">
            <textarea class="py-stdin" placeholder="Valores para input() — um por linha"></textarea>
            <div class="py-actions">
              <button class="btn py-run">Executar</button>
              <button class="btn py-clear">Limpar</button>
            </div>
          </div>
          <div class="py-out" aria-live="polite"></div>
        `;
        pre.insertAdjacentElement('afterend', wrap);

        const btnRun   = wrap.querySelector('.py-run');
        const btnClear = wrap.querySelector('.py-clear');
        const stdinTA  = wrap.querySelector('.py-stdin');
        const outDiv   = wrap.querySelector('.py-out');

        btnClear.onclick = () => { stdinTA.value = ""; outDiv.textContent = ""; };

        btnRun.onclick = async () => {
          btnRun.disabled = true; outDiv.textContent = "Executando…";
          try {
            const py = await getPyodide();
            // blindagem: se o bloco tiver só comentários, não quebra o try/finally
            const codeRaw = pre.innerText;
            const hasStmt = codeRaw.split('\n').some(l => l.trim() && !l.trim().startsWith('#'));
            const code = hasStmt ? codeRaw : 'pass';

            const inputs = stdinTA.value.replace(/\r\n/g, "\n");
            const runner = `
import sys, io, builtins
_input_lines = """${inputs}""".splitlines()
_input_idx = 0
def input(prompt=None):
    global _input_idx, _input_lines
    if _input_idx >= len(_input_lines):
        raise EOFError("Sem linhas suficientes em 'input()'.")
    val = _input_lines[_input_idx]
    _input_idx += 1
    return val
_stdout = io.StringIO()
_stderr = io.StringIO()
_sys_stdout, _sys_stderr = sys.stdout, sys.stderr
sys.stdout, sys.stderr = _stdout, _stderr
try:
${code.split('\n').map(l => '    ' + l).join('\n')}
finally:
    sys.stdout, sys.stderr = _sys_stdout, _sys_stderr
out = _stdout.getvalue()
err = _stderr.getvalue()
            `;
            await py.runPythonAsync(runner);
            const out = py.globals.get('out');
            const err = py.globals.get('err');

            function esc(s){return String(s).replace(/[&<>"']/g, m=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[m]));}

            outDiv.innerHTML = "";
            if (out && out.toString().trim()) {
              outDiv.innerHTML += `<pre class="py-stdout">${esc(out.toString())}</pre>`;
            }
            if (err && err.toString().trim()) {
              outDiv.innerHTML += `<pre class="py-stderr">${esc(err.toString())}</pre>`;
            }
            if (!outDiv.innerHTML) outDiv.textContent = "✔️ Concluído (sem saída).";
          } catch(e){
            const esc = s=>String(s).replace(/[&<>"']/g, m=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[m]));
            outDiv.innerHTML = `<pre class="py-stderr">${esc(e)}</pre>`;
          } finally {
            btnRun.disabled = false;
          }
        };
      }

      function autowire(){
        const pres = document.querySelectorAll('pre[data-lang="python"], .card.python pre, .py-code pre, pre[data-py]');
        pres.forEach(pre => { if (!pre.__wired) { pre.__wired = true; makePanel(pre); } });
      }

      document.addEventListener('DOMContentLoaded', autowire);
      window.addEventListener('load', autowire);
      return { wireAll: autowire };
    })();
  </script>
  <!-- ===== [PY-RUNNER] SCRIPTS NO HEAD ===== END -->

  <!-- ===== [BASE STYLES] ===== -->
  <style>
    :root{
      --bg:#0B0E13; --text:#E8EEF6; --muted:#A9B3C8;
      --outline:#38BDF8; --outline-hover:#34D399; --border:#1A2230;
      --btn-bg: rgba(14,20,29,0.16);
      --code-bg: rgba(13,19,27,0.22); --veil: rgba(7,10,15,0.10);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font:16px/1.7 "Arsenal",ui-sans-serif,system-ui;
      text-shadow:0 1px 1px rgba(0,0,0,.55), 0 0 10px rgba(56,189,248,.05);
    }
    a{color:var(--text); text-decoration:none; transition:color .15s, transform .12s, border-color .15s, background .15s}
    a:hover{color:var(--outline-hover); transform:translateY(-1px)}
    .container{max-width:1020px; margin:0 auto; padding:28px; position:relative; z-index:2}

    /* fundo com grafos */
    #bg{position:fixed; inset:0; width:100%; height:100%; z-index:0; pointer-events:none;
        background:linear-gradient(180deg,#0B0E13,#0A1018)}

    /* véu de leitura */
    #veil{position:fixed; inset:0; z-index:1; pointer-events:none; background:transparent; transition:background .2s ease}
    #veil.on{background:var(--veil)}

    /* bordas neon */
    .panel,.card,.btn{border:1px solid var(--outline)}
    .panel:hover,.card:hover,.btn:hover{border-color:var(--outline-hover)}

    .panel{border-radius:14px; box-shadow:var(--shadow); overflow:hidden; background:transparent}
    .panel-body{padding:18px; background:transparent}

    /* hero */
    .hero{margin-top:6px}
    .welcome{font-size:24px; margin:0 0 6px; color:#E6F0FF; text-align:center}
    h1{font-size:30px; margin:0 0 10px; font-weight:700; letter-spacing:.6px; text-align:center}
    .pill{display:inline-block; border:1px solid var(--outline); border-radius:999px; padding:4px 10px; color:var(--muted); background:transparent}

    .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; justify-content:center}
    .btn{background:var(--btn-bg); padding:8px 12px; border-radius:12px; color:var(--text); cursor:pointer}
    .btn:hover{box-shadow:0 12px 24px rgba(52,211,153,.12)}

    .card{background:transparent; border-radius:14px; padding:16px; box-shadow:var(--shadow)}
    .muted{color:var(--muted)}
    .bio{white-space:pre-line; background:transparent; border:1px solid var(--outline);
         border-radius:12px; padding:12px 14px; text-align:left; line-height:1.8; color:var(--text)}

    .grid{display:grid; gap:16px; margin-top:18px}
    @media(min-width:880px){ .grid{grid-template-columns:repeat(2,minmax(0,1fr))} }

    pre{
      margin:0; padding:12px; border:1px solid var(--outline); border-radius:10px; background:var(--code-bg);
      color:#EFF6FF; white-space:pre-wrap; overflow:auto;
      font-family:"IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace
    }

    .footer{margin-top:26px; padding-top:16px; border-top:1px solid var(--outline); color:var(--muted); font-size:13px}

    .controls{position:fixed; right:14px; top:12px; z-index:3; display:flex; gap:8px}
    .switch{border:1px solid var(--outline); background:var(--btn-bg); border-radius:999px; padding:6px 10px; font-size:12px; cursor:pointer}
    .switch:hover{border-color:var(--outline-hover)}

    /* ===== [PY-RUNNER] ESTILOS DO PAINEL ===== */
    .py-panel{
      border:1px solid var(--outline,#1A2236);
      border-radius:14px;
      padding:12px;
      margin-top:10px;
      background:rgba(0,0,0,.35);
      box-shadow:0 10px 30px rgba(0,0,0,.35)
    }
    .py-row{display:flex;gap:10px;align-items:flex-start;flex-wrap:wrap}
    .py-stdin{
      flex:1 1 260px;min-height:72px;
      background:#0b0f13;border:1px solid #3a5d8a;color:#e8f6ff;
      border-radius:12px;padding:10px 12px;outline:none;resize:vertical
    }
    .py-actions{display:flex;gap:8px;align-items:center}
    .py-panel .btn{cursor:pointer}
    .py-out{margin-top:8px}
    .py-out pre{
      margin:0;background:#0b0f13;border:1px dashed #3a5d8a;color:#e8f6ff;
      border-radius:12px;padding:10px 12px;white-space:pre-wrap
    }
    .py-stderr{border-color:#b54b4b;color:#ffdede}
  </style>
  <!-- ===== [BASE STYLES] END ===== -->
</head>

<body>
  <canvas id="bg" aria-hidden="true"></canvas>
  <div id="veil"></div>
  <div class="controls"><button id="toggleVeil" class="switch" title="Modo leitura (tecla R)">Modo leitura</button></div>

  <div class="container">
    <div class="panel">
      <div class="panel-body">
        <div class="hero">
          <p class="welcome">Seja bem-vindo ao meu portfólio.</p>
          <h1>RONALDO MATESCO</h1>
          <div style="text-align:center">
            <span class="pill">Portfólio focado em exercícios de <strong>Python</strong>.</span>
          </div>

          <!-- Contatos -->
          <div class="row" style="margin-top:12px">
            <a class="btn" target="_blank" href="https://www.linkedin.com/in/ronaldo-matesco-239b381ab">LinkedIn</a>
            <a class="btn" href="mailto:ronaldobh137@gmail.com">Email</a>
            <a class="btn" id="btn-wa-portfolio" target="_blank" rel="noopener" href="#">WhatsApp</a>
          </div>

          <script>
            // WhatsApp compatível (detecta mobile/desktop e abre a rota mais estável)
            (function () {
              const btn = document.getElementById('btn-wa-portfolio');
              if (!btn) return;
              const numero = '5531987871531'; // 55 + DDD + número
              const mensagem = 'Olá, vi seu portfólio RONALDO MATESCO e gostaria de conversar.';
              btn.addEventListener('click', function (e) {
                e.preventDefault();
                const isMobile = /Android|iPhone|iPad|iPod|Opera Mini|IEMobile/i.test(navigator.userAgent);
                const url = isMobile
                  ? `https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`
                  : `https://api.whatsapp.com/send?phone=${numero}&text=${encodeURIComponent(mensagem)}`;
                window.open(url, '_blank', 'noopener');
              });
            })();
          </script>

          <!-- Currículo -->
          <div id="cvpanel" class="card" style="margin-top:12px; text-align:center">
            <div class="cv-title" style="font-weight:700; margin-bottom:8px">Currículo</div>
            <div class="cv-actions" style="justify-content:center; display:flex; gap:10px; flex-wrap:wrap">
              <a id="downloadCv" class="btn" href="curriculo-ronaldo-matesco.pdf" download="Ronaldo-Matesco-Curriculo.pdf">Baixar currículo</a>
              <a class="btn" href="curriculo-ronaldo-matesco.pdf" target="_blank" rel="noopener">Abrir no navegador</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sobre mim -->
    <section class="card" style="margin-top:18px">
      <h3>Sobre mim</h3>
      <p id="sobre-bio"
        style="margin:10px 0 0 0; display:block; width:100%; max-width:100%;
              text-align:justify; text-justify:inter-word;
              line-height:1.55; hyphens:auto; -webkit-hyphens:auto;">
        Estou começando minha trajetória na área e focado em aprender Python com prática diária:
        exercícios, pequenos projetos e organização do código. Minha base em Engenharia Civil
        ajuda com raciocínio lógico, álgebra linear, cálculo e estatística — fundamentos úteis
        para Inteligência Artificial. Busco um estágio para contribuir em tarefas simples,
        evoluir com feedback do time e, passo a passo, assumir mais responsabilidades.
      </p>
    </section>

    <!-- Lista de exercícios (apenas Python) -->
    <section id="list" class="grid" aria-live="polite"></section>

    <footer class="footer">© <span id="year"></span> • RONALDO MATESCO</footer>
  </div>

  <script>
    // ano rodapé
    document.getElementById('year').textContent = new Date().getFullYear();

    // modo leitura (tecla R)
    const veil = document.getElementById('veil');
    document.getElementById('toggleVeil').addEventListener('click', ()=> veil.classList.toggle('on'));
    window.addEventListener('keydown', (e)=>{ if(e.key.toLowerCase()==='r') veil.classList.toggle('on'); });

    // paleta para detalhes visuais dos cards
    const EX_COLORS = ["#7DD3FC","#93C5FD","#C4B5FD","#A5B4FC","#67E8F9","#86EFAC","#FDE68A","#F9A8D4"];

    // ===== Exercícios (SOMENTE PYTHON) =====
    const EXERCISES = [
      {
        idx: 300,
        id: "py-ano-bissexto",
        title: "Python — Ano bissexto",
        category: "python",
        code: `# calculando se um ano é bissexto
# dica: digite 0 para usar o ano atual
from datetime import date

ano = int(input("digite o ano (0 = atual): "))

if ano == 0:
    ano = date.today().year
    print(ano)

if (ano % 4 == 0 and ano % 100 != 0) or (ano % 400 == 0):
    print(f"{ano} é BISSEXTO !")
else:
    print(f"{ano} NÃO é bissexto !")`
      }
      // 👉 Para adicionar novos exercícios:
      // copie o objeto acima, troque id/title/idx e o bloco code (entre crases).
    ];

    const list = document.getElementById('list');

    function card(e, idx){
      const el = document.createElement('div');
      el.className = 'card ' + (e.category || '');
      const color = EX_COLORS[idx % EX_COLORS.length];

      // Título limpo: remove "Python — " do começo para mostrar só o nome do exercício
      const titleText = (e.title || '').replace(/^Python\s+—\s+/i, '').trim();

      el.innerHTML = `
        <h3 style="margin-bottom:6px;border-left:4px solid ${color};padding-left:8px">${titleText}</h3>
        <pre data-lang="python"><code>${(e.code||'').replace(/</g,'&lt;')}</code></pre>
        <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn run-now">Executar código</button>
        </div>
      `;

      // botão "Executar código"
      el.querySelector('.run-now').addEventListener('click', function(){
        const pre = el.querySelector('pre');
        if (window.__PY_RUNNER__) window.__PY_RUNNER__.wireAll();
        const tryRun = () => {
          const panel = pre && pre.nextElementSibling;
          const runBtn = panel && panel.querySelector('.py-run');
          if (runBtn) { runBtn.click(); return true; }
          return false;
        };
        if (!tryRun()) {
          this.textContent = 'Carregando…';
          setTimeout(()=>{ if (tryRun()) this.textContent = 'Executar código'; }, 600);
        }
      });

      return el;
    }

    function render(){
      list.innerHTML = '';
      EXERCISES.slice().sort((a,b)=>b.idx-a.idx).forEach((e,i)=> list.appendChild(card(e,i)));
      if(list.children.length===0){
        const empty=document.createElement('div'); empty.className = 'card muted'; empty.textContent='Nada por aqui ainda.';
        list.appendChild(empty);
      }
      if (window.__PY_RUNNER__) window.__PY_RUNNER__.wireAll();
    }
    render();

    // Download robusto do CV
    const downloadBtn = document.getElementById('downloadCv');
    downloadBtn.addEventListener('click', async (ev) => {
      ev.preventDefault();
      const href = downloadBtn.getAttribute('href');
      try {
        const res = await fetch(href);
        if (!res.ok) throw new Error('HTTP ' + res.status);
        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = downloadBtn.getAttribute('download') || 'Curriculo.pdf';
        document.body.appendChild(a);
        a.click();
        setTimeout(() => { URL.revokeObjectURL(url); a.remove(); }, 1500);
      } catch (e) {
        window.open(href, '_blank');
      }
    });

    // Canvas: grafos simétricos com camadas
    (function graphBackground(){
      const c = document.getElementById('bg');
      const ctx = c.getContext('2d');
      let w,h,dpr; let layers=[]; let mouse={x:null,y:null};
      const LAYERS=[
        {count:90,speed:.34,link:150,hueOffset:0,dir:+1},
        {count:90,speed:.28,link:170,hueOffset:60,dir:-1},
        {count:90,speed:.24,link:190,hueOffset:140,dir:+1}
      ];
      let hue=200; const HUE_SPEED=.03;

      function resize(){
        dpr=window.devicePixelRatio||1; w=innerWidth; h=innerHeight;
        c.width=Math.floor(w*dpr); c.height=Math.floor(h*dpr); c.style.width='100%'; c.style.height='100%';
        ctx.setTransform(dpr,0,0,dpr,0,0);
      }
      window.addEventListener('resize',resize); resize();

      function rnd(a,b){return Math.random()*(b-a)+a;}
      function spawnSym(count,dir){
        const nodes=[]; const pairs=Math.floor(count/2);
        for(let i=0;i<pairs;i++){
          const xL=rnd(0,w*.32), y=rnd(0,h), xR=w-xL;
          const base=.06; const vxL=rnd(-.06,.06)+base+(dir*.02); const vxR=rnd(-.06,.06)-base+(dir*.02); const vy=rnd(-.1,.1);
          nodes.push({x:xL,y, vx:vxL,vy}); nodes.push({x:xR,y:y+rnd(-6,6), vx:vxR, vy:vy+rnd(-.02,.02)});
        }
        if(count%2===1) nodes.push({x:rnd(w*.45,w*.55), y:rnd(0,h), vx:rnd(-.05,.05)+(dir*.01), vy:rnd(-.08,.08)});
        return nodes;
      }
      function init(){ layers=LAYERS.map(L=>({...L, nodes:spawnSym(L.count,L.dir)})); }
      init();

      c.addEventListener('mousemove',e=>{mouse.x=e.clientX;mouse.y=e.clientY;});
      c.addEventListener('mouseleave',()=>{mouse.x=mouse.y=null;});

      function step(){
        ctx.clearRect(0,0,w,h); hue=(hue+HUE_SPEED)%360;
        for(const L of layers){
          const nodes=L.nodes, link=L.link, speed=L.speed, hueOffset=L.hueOffset;
          for(const n of nodes){
            if(mouse.x!==null){
              const dx=mouse.x-n.x, dy=mouse.y-n.y; const dist=Math.hypot(dx,dy)||1;
              if(dist<240){ n.vx+=(dx/dist)*.0016; n.vy+=(dy/dist)*.0016; }
            }
            n.x+=n.vx*(1+speed); n.y+=n.vy*(1+speed);
            if(n.x<0||n.x>w) n.vx*=-1; if(n.y<0||n.y>h) n.vy*=-1;
          }
          ctx.lineWidth=1;
          for(let i=0;i<nodes.length;i++) for(let j=i+1;j<i+14 && j<nodes.length;j++){
            const a=nodes[i],b=nodes[j]; const d=Math.hypot(a.x-b.x,a.y-b.y);
            if(d<link){
              const alpha=1-(d/link); const hh=(hue+hueOffset)%360;
              ctx.strokeStyle=`hsla(${hh},85%,70%,${(alpha*.24).toFixed(3)})`;
              ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke();
            }
          }
          ctx.fillStyle=`hsla(${(hue+hueOffset+40)%360},90%,80%,.40)`;
          for(const n of nodes){ ctx.beginPath(); ctx.arc(n.x,n.y,2,0,Math.PI*2); ctx.fill(); }
        }
        requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    })();
  </script>

  <!-- marca todos os <pre> como Python (garantia extra) -->
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      document.querySelectorAll('.card pre').forEach(pre => {
        pre.setAttribute('data-lang','python');
      });
      if (window.__PY_RUNNER__) window.__PY_RUNNER__.wireAll();
    });
  </script>
</body>
</html>
